tables:
  books: Book
  series: Series
  authors: Author
  entries: Entry


types:
    Entry:
        primary_key: id
        fields:
            - id:
                type: int
                required: True
            - path : Path
            - cover_images: Sequence[Path]

            - date_added: datetime
            - last_modified: datetime

            - type: str
            - table: str
            - data_id: int
            - hashseed: int

    Book:
        docstring:
            "Represents a book."

        primary_key: id
        fields:
            # Metadata
            - id:
                type: int
                required: True

            # Book information
            - isbn: str
            - isbn13: str
            - oclc: str
            - lccn: str
            - issn: str
            - google_id: str
            - goodreads_id: str
            - ASIN: str
            - metadata_sources: Sequence[str]

            - pub_date: str
            - original_pub_date: str
            - publisher: str

            - tags: Sequence[str]

            - duration: float
            - pages: int

            - title: str
            - subtitle: str

            - authors: Sequence[str]
            - author_ids:
                type: Sequence[int]
                foreign_key: "authors.id"
                comment: "Foreign key to the authors table"
            - author_roles:
                type: Sequence[int]
                comment: "Author = 0, Narrator = 1, Contributor = 2, Editor = 3"
            - description: str
            - descriptions:
                type: Mapping[str, str]
                comment: "Cache multiple descriptions by source."

            # Series information will be three corresponding lists, with the
            # primary series as the first entry in the list.
            - series_id:
                type: Sequence[int]
                foreign_key: "series.id"
                comment: "Foreign key to the series table"
            - series_name: Sequence[str]
            - series_number: Sequence[int]

            - cover_images: Mapping[str, Mapping[str, str]]

            - language: str

    Author:
        docstring:
            "Represents a book author."

        primary_key: id
        fields:
            # Metadata
            - id:
                type: int
                required: true

            # Author information
            - name: str
            - sort_name: str
            - books:
                type: Sequence[int]
                comment: "Foreign key to the \"books\" table"
                foreign_key: "books.id"
            - tags: Sequence[str]

            # Miscellaneous information
            - description:
                type: str
                comment: "Biographical information"
            - images: Sequence[Path]
            - alternate_names: Sequence[str]
            - website: str
            - birthdate: date
            - deathdate: date

    Series:
        docstring:
            "Represents a related series of books or other data items."

        primary_key: id
        fields:
            # Metadata
            - id:
                type: int
                required: true

            # Series information
            - name:
                type: str
                commment: "Series names will be of form name (modifier)"
            - modifier:
                type: str
                comment:
                    "The modifier is used for disambiguating alternate versions of a series with different subsets or orders."
            - name_with_modifier: str

            - data_ids:
                type: Sequence[int]
                comment: "List of keys to components â€” these are foreign keys to potentially multiple tables."
            - data_numbers:
                type: Sequence[float]
                comment: "A list, the same size as data_ids, of the corresponding series numbering."
            - data_tables:
                type: Sequence[str]
                comment: "The tables to find the data ids in"
            - authors:
                type: Sequence[int]
                foreign_key: "authors.id"

            - alternate_orders:
                type: Sequence[int]
                commment: "IDs of other series representing the same books in a different order"
            - superseries:
                type: Sequence[int]
                comment: "When a series is a subset of a larger series, e.g. 'Enter's Shadow' as a subset of 'Enderverse' or 'Ringworld' as a subset of 'Known Space'. This is the ids of the superseries to which this series belongs."
            - related_series:
                type: Sequence[int]
